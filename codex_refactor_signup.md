너는 시니어 백엔드 엔지니어다.
지금부터 제공되는 프로젝트 코드를 "전체 흐름 관점"에서 분석해야 한다.

⚠️ 중요
- 개별 파일 단위가 아니라
- 로그인 → 회원가입 → 완료까지의 "상태 흐름"을 기준으로 이해해야 한다
- 모든 코드를 다 받은 뒤에만 결론을 내려라

--------------------------------
[프로젝트 목표]

- 카카오 소셜 로그인 기반 서비스
- 첫 로그인 시 신규/기존 유저 판별
- 신규 유저는 추가 정보 입력 후 회원가입 완료
- 최종적으로 회원가입이 정상 완료되어 로그인 상태가 되어야 함

--------------------------------
[현재 문제]

- 카카오 로그인 성공
- kakaoId 추출 성공
- kakaoId 기준 유저 조회/생성 성공
- 신규 유저 여부 반환 성공
  ❌ 회원가입 완료 버튼 클릭 시 회원가입 실패

--------------------------------
[분석 관점]

다음 관점에서 전체 코드를 종합 분석하라.

1. User 생성 시점이 논리적으로 맞는지
2. 회원가입 완료 단계가 INSERT인지 UPDATE여야 하는지
3. kakaoId / userId / JWT 식별자가 일관되게 사용되는지
4. 회원가입 완료 API가 실패할 수밖에 없는 구조적 이유가 있는지
5. 상태 관리(PENDING, ACTIVE 등)가 필요한 구조인지

--------------------------------
[최종 요청]

모든 코드를 다 받은 후,
아래 형식으로 답변하라.

1️⃣ 문제의 "근본 원인"
2️⃣ 현재 구조에서 반드시 충돌하는 지점
3️⃣ 회원가입이 완료되도록 하기 위한 수정 전략
4️⃣ 기존 구조를 최대한 유지한 최소 수정 방안
5️⃣ 수정 후 최종 회원가입 플로우 요약

--------------------------------
[코드 제공 순서]

1. 카카오 로그인 관련 컨트롤러/서비스
2. User 엔티티 + Repository
3. 회원가입 완료 API 컨트롤러/서비스
4. 회원가입 DTO
5. 프론트 회원가입 완료 요청 코드

👉 모든 코드가 제공된 후에만 결론을 내려라.
